# FrameDetective æŠ€æœ¯æ ˆæ¸…å•

## ðŸ“Š å®Œæ•´æŠ€æœ¯æ ˆæ¦‚è§ˆ

### ðŸ”§ åŽç«¯æŠ€æœ¯æ ˆ (Node.js API Server)

#### æ ¸å¿ƒæ¡†æž¶ä¸Žè¿è¡Œæ—¶
- **Node.js**: `>= 18.0.0` - JavaScript è¿è¡Œæ—¶çŽ¯å¢ƒ
- **Express.js**: `^5.2.1` - Web åº”ç”¨æ¡†æž¶
- **ES Modules**: çŽ°ä»£ JavaScript æ¨¡å—ç³»ç»Ÿ

#### æ ¸å¿ƒä¾èµ–
| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| `replicate` | `^1.4.0` | Replicate API SDK - è°ƒç”¨ SAM3 æ¨¡åž‹ |
| `express` | `^5.2.1` | HTTP æœåŠ¡å™¨æ¡†æž¶ |
| `dotenv` | `^17.2.3` | çŽ¯å¢ƒå˜é‡ç®¡ç† |
| `cors` | `^2.8.5` | è·¨åŸŸèµ„æºå…±äº«ä¸­é—´ä»¶ |
| `multer` | `^2.0.2` | æ–‡ä»¶ä¸Šä¼ å¤„ç† |
| `sharp` | `^0.34.5` | é«˜æ€§èƒ½å›¾åƒå¤„ç†åº“ |
| `adm-zip` | `^0.5.16` | ZIP æ–‡ä»¶å¤„ç† |

#### AI & æœºå™¨å­¦ä¹ 
- **SAM3 (Segment Anything Model 3)**:
  - æä¾›å•†: Replicate
  - æ¨¡åž‹: `lucataco/sam3-video`
  - ç”¨é€”: è§†é¢‘å¯¹è±¡åˆ†å‰²ä¸Žæ£€æµ‹

- **VLM (Vision-Language Model)**:
  - æ¨¡åž‹: Qwen2.5-VL-32B-Instruct
  - ç”¨é€”: å›¾åƒç‰¹å¾æå–

#### å›¾åƒå¤„ç†
- **Sharp**:
  - å›¾åƒæ ¼å¼è½¬æ¢
  - å›¾åƒåˆ†æž
  - Base64 ç¼–ç 

#### æ–‡ä»¶å¤„ç†
- **ADM-ZIP**:
  - ZIP æ–‡ä»¶åˆ›å»º
  - ZIP æ–‡ä»¶è§£æž
  - æ‰¹é‡å›¾åƒå¤„ç†

---

### ðŸŽ¨ å‰ç«¯æŠ€æœ¯æ ˆ (Anti-Trafficking App)

#### æ ¸å¿ƒæ¡†æž¶
- **React**: `^19.2.0` - UI æ¡†æž¶ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰
- **React DOM**: `^19.2.0` - DOM æ¸²æŸ“
- **TypeScript**: `~5.9.3` - ç±»åž‹å®‰å…¨çš„ JavaScript

#### æž„å»ºå·¥å…·
- **Vite**: `^7.2.4` - çŽ°ä»£å‰ç«¯æž„å»ºå·¥å…·
  - å¿«é€Ÿçƒ­æ›´æ–° (HMR)
  - ä¼˜åŒ–çš„ç”Ÿäº§æž„å»º
  - TypeScript åŽŸç”Ÿæ”¯æŒ

#### UI ç»„ä»¶åº“
- **Lucide React**: `^0.561.0` - çŽ°ä»£å›¾æ ‡åº“

#### å¼€å‘å·¥å…·
| å·¥å…· | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| `@vitejs/plugin-react` | `^5.1.1` | Vite React æ’ä»¶ |
| `eslint` | `^9.39.1` | ä»£ç è´¨é‡æ£€æŸ¥ |
| `typescript-eslint` | `^8.46.4` | TypeScript ESLint é›†æˆ |
| `eslint-plugin-react-hooks` | `^7.0.1` | React Hooks è§„åˆ™ |
| `eslint-plugin-react-refresh` | `^0.4.24` | React åˆ·æ–°æ’ä»¶ |

#### TypeScript ç±»åž‹
- `@types/react`: `^19.2.5`
- `@types/react-dom`: `^19.2.3`
- `@types/node`: `^24.10.1`

---

### ðŸ—„ï¸ æ•°æ®å­˜å‚¨

- **æ–‡ä»¶ç³»ç»Ÿ**:
  - ä¸Šä¼ æ–‡ä»¶å­˜å‚¨: `public/uploads/`
  - è¾“å‡ºæ–‡ä»¶å­˜å‚¨: `outputs/`
  - ä¸´æ—¶æ–‡ä»¶å¤„ç†

---

### ðŸŒ API & é›†æˆ

#### å¤–éƒ¨ API
1. **Replicate API**
   - SAM3 è§†é¢‘åˆ†æž
   - å¼‚æ­¥ä»»åŠ¡å¤„ç†
   - Webhook æ”¯æŒ

2. **LLM API** (å¯é€‰)
   - å›¾åƒç‰¹å¾æå–
   - è‡ªå®šä¹‰ base URL æ”¯æŒ
   - å¤šæä¾›å•†å…¼å®¹

#### HTTP å®¢æˆ·ç«¯
- **Replicate SDK**: å®˜æ–¹ JavaScript SDK
- **fetch API**: åŽŸç”Ÿ HTTP è¯·æ±‚

---

### ðŸ” å®‰å…¨ä¸Žé…ç½®

#### çŽ¯å¢ƒå˜é‡ç®¡ç†
```env
REPLICATE_API_TOKEN=xxx
LLM_API_KEY=xxx
LLM_BASE_URL=xxx
LLM_MODEL_NAME=xxx
PORT=3001
```

#### å®‰å…¨æŽªæ–½
- `.env` æ–‡ä»¶ä¿æŠ¤
- `.gitignore` é…ç½®
- CORS è·¨åŸŸæŽ§åˆ¶
- æ–‡ä»¶ä¸Šä¼ éªŒè¯

---

### ðŸ› ï¸ å¼€å‘å·¥å…·

#### åŒ…ç®¡ç†å™¨
- **npm**: Node.js é»˜è®¤åŒ…ç®¡ç†å™¨

#### å¼€å‘è„šæœ¬
```json
{
  "start": "node index.js",          // ç”Ÿäº§å¯åŠ¨
  "dev": "node --watch index.js",    // å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
  "test": "echo \"Error: no test specified\" && exit 1"
}
```

#### å‰ç«¯å¼€å‘è„šæœ¬
```json
{
  "dev": "vite",                     // å¼€å‘æœåŠ¡å™¨
  "build": "tsc -b && vite build",   // ç”Ÿäº§æž„å»º
  "lint": "eslint .",                // ä»£ç æ£€æŸ¥
  "preview": "vite preview"          // é¢„è§ˆæž„å»ºç»“æžœ
}
```

---

### ðŸ“ é¡¹ç›®ç»“æž„æŠ€æœ¯

#### åŽç«¯æž¶æž„
```
src/
â”œâ”€â”€ app.js                 # Express åº”ç”¨é…ç½®
â”œâ”€â”€ config/
â”‚   â””â”€â”€ env.js            # çŽ¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ controllers/          # ä¸šåŠ¡é€»è¾‘æŽ§åˆ¶å™¨
â”œâ”€â”€ services/             # å¤–éƒ¨æœåŠ¡å°è£…
â”œâ”€â”€ middleware/           # Express ä¸­é—´ä»¶
â”œâ”€â”€ routes/               # API è·¯ç”±å®šä¹‰
â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
```

#### å‰ç«¯æž¶æž„
```
anti-trafficking-app/src/
â”œâ”€â”€ AntiTraffickingSystem.tsx  # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ api.ts                      # API å®¢æˆ·ç«¯
â”œâ”€â”€ App.tsx                     # æ ¹ç»„ä»¶
â””â”€â”€ main.tsx                    # åº”ç”¨å…¥å£
```

---

### ðŸš€ éƒ¨ç½²ç›¸å…³

#### è¿è¡ŒçŽ¯å¢ƒ
- **Node.js**: >= 18.0.0
- **æ“ä½œç³»ç»Ÿ**: Windows / Linux / macOS
- **ç«¯å£**: 3001 (åŽç«¯), 5173 (å‰ç«¯å¼€å‘)

#### ç”Ÿäº§ä¼˜åŒ–
- Express é™æ€æ–‡ä»¶æœåŠ¡
- Vite ç”Ÿäº§æž„å»º
- å›¾åƒåŽ‹ç¼©ï¼ˆSharpï¼‰
- ZIP æ‰¹é‡å¤„ç†

---

## ðŸ“Š æŠ€æœ¯æ ˆç»Ÿè®¡

### åŽç«¯ä¾èµ–æ•°é‡
- **æ ¸å¿ƒä¾èµ–**: 7 ä¸ª
- **å¼€å‘ä¾èµ–**: 0 ä¸ª

### å‰ç«¯ä¾èµ–æ•°é‡
- **æ ¸å¿ƒä¾èµ–**: 3 ä¸ª
- **å¼€å‘ä¾èµ–**: 11 ä¸ª

### ç¼–ç¨‹è¯­è¨€
- **JavaScript (ES2020+)**: åŽç«¯ä¸»è¦è¯­è¨€
- **TypeScript**: å‰ç«¯ä¸»è¦è¯­è¨€
- **JSX/TSX**: React ç»„ä»¶

### ä»£ç è§„èŒƒ
- **ESLint**: ä»£ç è´¨é‡
- **TypeScript**: ç±»åž‹å®‰å…¨
- **ES Modules**: æ¨¡å—ç³»ç»Ÿ

---

## ðŸŽ¯ æŠ€æœ¯é€‰åž‹ç†ç”±

### ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›æŠ€æœ¯ï¼Ÿ

1. **Node.js + Express**
   - é«˜æ€§èƒ½å¼‚æ­¥ I/O
   - ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ
   - æ˜“äºŽéƒ¨ç½²å’Œæ‰©å±•

2. **React 19 + TypeScript**
   - æœ€æ–°çš„ React ç‰¹æ€§
   - ç±»åž‹å®‰å…¨
   - ä¼˜ç§€çš„å¼€å‘ä½“éªŒ

3. **Vite**
   - æžå¿«çš„å¼€å‘æœåŠ¡å™¨
   - ä¼˜åŒ–çš„ç”Ÿäº§æž„å»º
   - åŽŸç”Ÿ ESM æ”¯æŒ

4. **Replicate**
   - ä¾¿æ·çš„ AI æ¨¡åž‹è®¿é—®
   - æ— éœ€ç®¡ç† GPU åŸºç¡€è®¾æ–½
   - SAM3 å®˜æ–¹æ‰˜ç®¡

5. **Sharp**
   - æœ€å¿«çš„ Node.js å›¾åƒå¤„ç†åº“
   - å†…å­˜æ•ˆçŽ‡é«˜
   - æ”¯æŒå¤šç§æ ¼å¼

---

## ðŸ”„ æŠ€æœ¯ç‰ˆæœ¬ç­–ç•¥

- **æ ¸å¿ƒä¾èµ–**: ä½¿ç”¨ `^` (å…¼å®¹æ›´æ–°)
- **TypeScript**: ä½¿ç”¨ `~` (è¡¥ä¸æ›´æ–°)
- **Node.js**: >= 18.0.0 (LTS ç‰ˆæœ¬)

---

**æ›´æ–°æ—¶é—´**: 2026-01-31
**é¡¹ç›®ç‰ˆæœ¬**: 1.0.0
